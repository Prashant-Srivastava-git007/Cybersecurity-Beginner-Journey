# Velociraptor

Velociraptor is an open-source **Digital Forensics & Incident Response (DFIR)** tool used to collect, hunt, and analyze forensic data from multiple endpoints using **VQL (Velociraptor Query Language)**.
This guide provides a short, clear, beginner-friendly installation walkthrough for a Linux server (Kali example) and a Windows client.

---

## üìå What Velociraptor Does

* Collects system artifacts (files, logs, processes, registry, memory, etc.)
* Performs threat hunting across many machines at once
* Uses lightweight agents
* Supports custom VQL artifacts for flexible investigations

---

# üõ†Ô∏è Installation (Linux Server ‚Äì Kali)

## 1. Prepare the System

### Install network tools

```bash
sudo apt install net-tools
```

**Explanation:**
Installs older networking utilities like `ifconfig` and `route`, which are needed in some environments.

---

### Check network configuration

```bash
ifconfig
```

**Explanation:**
Shows your network interface name (e.g., `eth0`, `ens33`) and your current IP address.

```bash
ip r
```

**Explanation:**
Displays routing information‚Äîmainly used to find your gateway IP.

---

### (Optional) Set a static IP

```bash
sudo ifconfig <ADAPTER> <IP> netmask <NETMASK>
```

**Explanation:**
Assigns a permanent IP address to your server interface (useful for a DFIR lab setup).

```bash
sudo route add default gw <GATEWAY> <ADAPTER>
```

**Explanation:**
Sets the default outbound route so the VM can reach the internet.

---

## 2. Download Velociraptor Binary

```bash
wget https://github.com/Velocidex/velociraptor/releases/download/v0.75/velociraptor-v0.75.5-linux-amd64
```

**Explanation:**
Downloads the Linux Velociraptor executable directly from GitHub.

```bash
chmod 764 velociraptor-v0.75.5-linux-amd64
```

**Explanation:**
Gives execute permission so the file can run as a program.

---

### Create the main directory

```bash
sudo mkdir -p /opt/velociraptor
```

**Explanation:**
Creates the folder where Velociraptor will store configuration and server data.

---

## 3. Generate Server Configuration

```bash
sudo ./velociraptor-v0.75.5-linux-amd64 config generate -i
```

**Explanation:**
Opens an interactive wizard to build the server configuration file.

### Recommended test environment selections:

* OS: **Linux**
* Datastore: `/opt/velociraptor`
* SSL: **Self-signed**
* Public DNS / IP: **Your Server Static IP**
* Frontend port: **8000**
* GUI port: **8889**
* WebSocket: **No**
* Use registry for writeback: **No**
* DynDNS: **None**
* Logs: `/opt/velociraptor/logs`
* Output config: `/opt/velociraptor/server.config.yaml`

---

## 4. Update Configuration File

```bash
sudo nano /opt/velociraptor/server.config.yaml
```

**Explanation:**
Opens the YAML config file in the nano editor.

‚û°Ô∏è Change `GUI bind_address: 127.0.0.1` ‚Üí `bind_address: <YOUR STATIC IP>`

This allows access from other machines on your network.

---

## 5. Build & Install Debian Package

```bash
sudo ./velociraptor-v0.75.5-linux-amd64 --config /opt/velociraptor/server.config.yaml debian server --binary velociraptor-v0.75.5-linux-amd64
```

**Explanation:**
Generates a `.deb` installation package for Velociraptor.

```bash
sudo dpkg -i velociraptor_server_0.75.5_amd64.deb
```

**Explanation:**
Installs the server as a Linux service (`systemd`).

### Check running status

```bash
systemctl status velociraptor_server.service
```

**Explanation:**
Confirms if the Velociraptor server is active and running.

---

# üñ•Ô∏è Setting up Windows Client

## 1. Generate Client Configuration

```bash
sudo ./velociraptor-v0.75.5-linux-amd64 config client --config /opt/velociraptor/server.config.yaml > /opt/velociraptor/client.config.yaml
```

**Explanation:**
Creates a configuration file specifically for clients (Windows agents).

```bash
sudo chown velociraptor:velociraptor /opt/velociraptor/client.config.yaml
```

**Explanation:**
Changes ownership so the Velociraptor service can access the file.

---

## 2. Download Windows Agent

```bash
wget https://github.com/Velocidex/velociraptor/releases/download/v0.75/velociraptor-v0.75.5-windows-amd64.exe
```

**Explanation:**
Downloads the Windows Velociraptor binary.

---

## 3. Repack the Windows Agent

```bash
sudo ./velociraptor-v0.75.5-linux-amd64 config repack --exe velociraptor-v0.75.5-windows-amd64.exe /opt/velociraptor/client.config.yaml vraptorclient.exe
```

**Explanation:**
Bundles your server settings **into the agent**, so the client automatically connects.

Check output:

```bash
ls -la
```

**Explanation:**
Verifies the new `.exe` file exists.

---

## 4. Transfer the Client to Windows

Start a simple web server:

```bash
sudo python3 -m http.server 1337
```

**Explanation:**
Makes your current directory accessible from a browser for easy file transfer.

On Windows ‚Üí open browser:

```
http://<SERVER-IP>:1337
```

Download `vraptorclient.exe`.

---

## 5. Install the Client Service (Windows)

Open **PowerShell as Administrator**:

```powershell
.\vraptorclient.exe service install
```

**Explanation:**
Installs Velociraptor as a Windows service and connects automatically to the server.

---

# üéâ Access Velociraptor Web GUI

Open:

```
https://<SERVER-IP>:8889
```

Log in ‚Üí You should see the Windows client under **"Clients"**.

---
---

