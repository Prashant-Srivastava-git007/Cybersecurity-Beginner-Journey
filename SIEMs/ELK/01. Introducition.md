# Introduction to Elastic (ELK Stack)

---

## What is the ELK Stack?

The **ELK Stack** is a collection of tools used to **collect, process, search, and visualize data**.

**Components:**
- **Elasticsearch** – Stores and searches data
- **Logstash** – Ingests and transforms data
- **Kibana** – Visualizes and analyzes data

The stack is often extended with **Beats**, lightweight agents that collect data from systems and applications.

---

## Elasticsearch Overview

Elasticsearch is the **core engine** of the ELK Stack.

- A **NoSQL search and analytics engine**
- Designed for **fast searching, indexing, and analysis**
- Handles **large volumes of data**
- Commonly used for **log analysis, threat detection, and alerts**

---

## Elasticsearch Performance Features

- **Sharding**: Splits data into smaller pieces for faster access and scalability  
- **Parallel Processing**: Searches multiple shards at the same time  
- **Replication**: Keeps copies of data for fault tolerance  
- **Full-Text Search**: Searches entire document content, not just exact matches  

---

## Elasticsearch Search Capabilities

- **Tokenization**: Breaks text into searchable terms  
- **Term-Based Queries**: Search for specific keywords  
- **Full-Text Matching**: Uses relevance scoring (e.g., BM25)  
- **Advanced Search Options**: Fuzzy search, proximity search, Boolean logic  
- **Language Analyzers**: Supports multiple languages  
- **Aggregations & Facets**: Summarize and analyze data (counts, averages, categories)

---

## Near Real-Time Indexing

- **Inverted Index**: Enables fast and accurate searches  
- **Write-Ahead Log (WAL)**: Prevents data loss during ingestion  
- **Index Refresh**: Data becomes searchable within seconds  
- Critical for **SIEM and monitoring use cases**

---

## Logstash Overview

Logstash is used to **process data before storing it in Elasticsearch**.

- Ingests data from many sources (logs, databases, APIs, queues)
- Transforms and enriches data
- Sends processed data to Elasticsearch or other outputs

---

## Common Logstash Filters

- **Grok**: Extracts structured fields from raw logs  
- **Date**: Normalizes timestamps  
- **Mutate**: Renames or modifies fields  
- **Translate**: Enriches data using lookup tables  
- **GeoIP**: Adds geographic data from IP addresses  
- **User-Agent**: Extracts browser and OS details  
- **JSON / CSV**: Parses structured formats  
- **XML**: Extracts data from XML logs  

---

## Logstash Outputs and Flow Control

- Outputs data to **Elasticsearch, Kafka, S3, Redis, databases**, or stdout
- Supports **conditional logic (if/else)** to control data flow

---

## Kibana Overview

Kibana is the **visual layer** of the ELK Stack.

- Used to explore and analyze data stored in Elasticsearch
- Provides **interactive visualizations and dashboards**

---

## Kibana Visualizations

- **Charts**: Line, bar, pie, scatter  
- **Maps**: Visualize geographic data  
- **Time Series (TSVB)**: Analyze time-based metrics  
- **Gauge & Metric**: Display single values  
- **Heat Maps**: Show data density and patterns  
- **Tag Clouds**: Highlight frequent terms  

---

## Kibana Dashboards

- Combine multiple visualizations in one view
- Apply filters and queries
- Monitor KPIs and trends in near real-time

---

## Searching and Querying in Kibana

- **Ad-hoc searches** using simple queries or Lucene syntax
- **Filters and Query DSL** for advanced data exploration

---

## Time-Based and Geospatial Analysis

- **Time Analysis**: Detect trends, spikes, and anomalies
- **Geospatial Analysis**: Analyze location-based data with maps

---

## Alerts and Security

- **Alerts**: Trigger notifications based on conditions
- **Security Features**:
  - Role-Based Access Control (RBAC)
  - LDAP and SAML authentication

---

## Beats and X-Pack

### Beats (Data Collection Agents)
Lightweight agents that collect and forward data.

Common Beats:
- **Filebeat** – Log files
- **Metricbeat** – System metrics
- **Packetbeat** – Network traffic
- **Auditbeat** – Audit logs and system changes

### X-Pack
Adds advanced features such as:
- Alerting
- Machine learning
- Reporting
- Enhanced security

Together, **ELK + Beats + X-Pack** can function as a **full SIEM solution**.

---

## Data Flow Options

### Beats → Elasticsearch (Direct)
**Pros**
- Simple setup
- Lower latency
- Fewer components

**Cons**
- Limited data transformation

### Beats → Logstash → Elasticsearch
**Pros**
- Advanced parsing and enrichment
- Supports complex pipelines

**Cons**
- More resources
- Increased complexity

---
